<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:_3Dice.Views"
             x:Class="_3Dice.MainPage">

    <ScrollView>
        <VerticalStackLayout
            Padding="15,10"
            Spacing="20">

            <Label
                Text="3D Dice Roller"
                Style="{StaticResource Headline}"
                SemanticProperties.HeadingLevel="Level1"
                HorizontalOptions="Center"
                Margin="0,10,0,20" />

            <!-- 3D Dice Rolling Area -->
            <VerticalStackLayout Spacing="10">
                <Label
                    Text="🎲 Physics Dice Rolling:"
                    FontSize="18"
                    FontAttributes="Bold"
                    HorizontalOptions="Center" />
                
                <views:DiceRollingView x:Name="DiceRollingView" />
            </VerticalStackLayout>

            <!-- Visual Dice Selection -->
            <VerticalStackLayout Spacing="15">
                <Label
                    Text="Select Your Dice:"
                    FontSize="18"
                    FontAttributes="Bold"
                    HorizontalOptions="Center" />
                
                <!-- Dice Types Grid -->
                <CollectionView x:Name="DiceTypesCollectionView" 
                               BackgroundColor="Transparent"
                               SelectionMode="None">
                    <CollectionView.ItemsLayout>
                        <GridItemsLayout Orientation="Vertical" Span="2" />
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="White" 
                                   Padding="10" 
                                   Margin="3"
                                   CornerRadius="12"
                                   HasShadow="True">
                                <VerticalStackLayout Spacing="8" HorizontalOptions="Fill">
                                    
                                    <!-- Dice Name -->
                                    <Label Text="{Binding Name}"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"
                                           TextColor="Black" />
                                    
                                    <!-- Count Display -->
                                    <Label Text="{Binding Count, StringFormat='Count: {0}'}"
                                           FontSize="14"
                                           HorizontalOptions="Center"
                                           TextColor="Gray" />
                                    
                                    <!-- Count Controls -->
                                    <StackLayout Orientation="Horizontal" 
                                               HorizontalOptions="Center" 
                                               Spacing="8">
                                        <Button Text="-"
                                                FontSize="18"
                                                WidthRequest="35"
                                                HeightRequest="35"
                                                BackgroundColor="Red"
                                                TextColor="White"
                                                CornerRadius="17"
                                                Padding="0"
                                                Clicked="OnDecreaseDiceClicked"
                                                CommandParameter="{Binding}" />
                                        
                                        <Label Text="{Binding Count}"
                                               FontSize="22"
                                               FontAttributes="Bold"
                                               VerticalOptions="Center"
                                               WidthRequest="30"
                                               HorizontalTextAlignment="Center"
                                               TextColor="Black" />
                                        
                                        <Button Text="+"
                                                FontSize="18"
                                                WidthRequest="35"
                                                HeightRequest="35"
                                                BackgroundColor="Green"
                                                TextColor="White"
                                                CornerRadius="17"
                                                Padding="0"
                                                Clicked="OnIncreaseDiceClicked"
                                                CommandParameter="{Binding}" />
                                    </StackLayout>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>

            <!-- Current Selection Summary -->
            <Frame BackgroundColor="LightBlue" 
                   Padding="15" 
                   CornerRadius="10">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Current Selection:"
                           FontSize="16"
                           FontAttributes="Bold"
                           HorizontalOptions="Center" />
                    <Label x:Name="SelectionSummaryLabel"
                           Text=""
                           FontSize="14"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center" />
                    <Button Text="Clear All"
                            x:Name="ClearAllBtn"
                            BackgroundColor="Orange"
                            TextColor="White"
                            FontSize="14"
                            Clicked="OnClearAllClicked"
                            HorizontalOptions="Center"
                            IsVisible="False" />
                </VerticalStackLayout>
            </Frame>

            <!-- Results Display -->
            <Frame BackgroundColor="LightGray" 
                   Padding="15" 
                   CornerRadius="10">
                <ScrollView MaximumHeightRequest="200">
                    <Label x:Name="DiceResultLabel"
                           Text="Select dice and roll to see realistic 3D physics!"
                           FontSize="16"
                           HorizontalTextAlignment="Center"
                           TextColor="Black" />
                </ScrollView>
            </Frame>

            <!-- Roll Button -->
            <Button x:Name="RollDiceBtn"
                    Text="🎲 Roll 3D Dice with Physics! 🎲" 
                    SemanticProperties.Hint="Rolls selected dice with realistic 3D physics"
                    Clicked="OnRollDiceClicked"
                    HorizontalOptions="Fill"
                    FontSize="18"
                    Padding="20"
                    BackgroundColor="DarkBlue"
                    TextColor="White"
                    CornerRadius="10"
                    Margin="0,10,0,20" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
